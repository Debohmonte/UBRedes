<!DOCTYPE html>
<html lang="es">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

<style id="estiloGlobal">
/*Estilo global*/
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
html, body {
    height: 100%;
    width: 100%;
}

body {
    font-size: 14px;
    font-family: Arial, sans-serif;
}
</style>

<style id="estiloTabla">
div.contenedorTabla {
    width: 100%;
    height: 100%;
    background-color: gray;
}

div.contenedorTabla h1 {
    text-align: center;
    margin-bottom: 10px;
}

div.contenedorTabla header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: beige;
    padding: 10px;
}

div.contenedorTabla header label {
    margin-right: 10px;
}

div.contenedorTabla header button {
    padding: 10px 15px;
    background-color: #FF7361;
    border: none;
    cursor: pointer;
}

div.contenedorTabla table {
    width: 100%;
    border-collapse: collapse;
}

div.contenedorTabla thead {
    background-color: #FF7361;
}

div.contenedorTabla thead tr {
    height: 50px;
}

div.contenedorTabla thead th {
    padding: 10px;
    text-align: center;
    font-weight: bold;
}

div.contenedorTabla tbody tr {
    height: 50px;
}

div.contenedorTabla tbody td {
    padding: 10px;
    text-align: center;
}

div.contenedorTabla tfoot {
    background-color: #FF7361;
}

div.contenedorTabla tfoot td {
    font-weight: bold;
    padding: 10px;
    text-align: center;
}

div.contenedorTabla footer {
    display: flex;
    justify-content: space-between;
    background-color: beige;
    padding: 10px;
}

</style>

<script src="../jquery.js"></script>
<script id="codigoTabla">
$(document).ready(function() {
    $("#btAccionCarga").click(function() {
        cargarFacturas();
    });

    $("#btAccionVacia").click(function() {
        $("#tbDatos").empty();
    });

    function cargarFacturas() {
        $("#tbDatos").empty();
        $("#tbDatos").html("<p>Esperando respuesta...</p>");

        $.ajax({
            type: "get",
            url: "salidaJsonFacturas.php",
            data: {
                orden: $("#orden").val(),
                f_factura_numero: $("#f_factura_numero").val(),
                f_factura_familia: $("#f_factura_familia").val(),
                f_factura_descripcion: $("#f_factura_descripcion").val(),
                f_factura_fechaAlta: $("#f_factura_fechaAlta").val(),
                f_factura_saldoStock: $("#f_factura_saldoStock").val()
            },
            success: function(respuestaDelServer) {
                $("#tbDatos").empty();
                let facturas = JSON.parse(respuestaDelServer).facturas;

                facturas.forEach(function(factura) {
                    let tr = $("<tr></tr>");
                    $("<td></td>").text(factura.numero).appendTo(tr);
                    $("<td></td>").text(factura.familia).appendTo(tr);
                    $("<td></td>").text(factura.descripcion).appendTo(tr);
                    $("<td></td>").text(factura.fechaAlta).appendTo(tr);
                    $("<td></td>").text(factura.saldoStock).appendTo(tr);

                    $("#tbDatos").append(tr);
                });

                $("#totalRegistros").text("Nro de registros: " + facturas.length);
            }
        });
    }
});
</script>
</head>
<body>
<div id="contenedorTablaFacturas" class="contenedorTabla">
    <header>
        <h1>Facturas</h1>
        <div>
            <label>Orden:</label>
            <input type="text" name="orden" id="orden" readonly value="codArt">
        </div>
        <button id="btAccionCarga">Cargar datos</button>
        <button id="btAccionVacia">Vaciar datos</button>
    </header>

    <table>
        <thead>
            <tr>
                <th>Número</th>
                <th>Familia</th>
                <th>Descripción</th>
                <th>Fecha Alta</th>
                <th>Saldo Stock</th>
            </tr>
            <tr>
                <td><input id="f_factura_numero" type="text"></td>
                <td><input id="f_factura_familia" type="text"></td>
                <td><input id="f_factura_descripcion" type="text"></td>
                <td><input id="f_factura_fechaAlta" type="date"></td>
                <td><input id="f_factura_saldoStock" type="text"></td>
            </tr>
        </thead>

        <tbody id="tbDatos"></tbody>

        <tfoot>
            <tr>
                <td colspan="5" id="totalRegistros"></td>
            </tr>
        </tfoot>
    </table>

    <footer>
        <div id="totalRegistros" class="totalRegistros">
            Nro de registros: 0
        </div>
        <div id="textoPie" class="textoPie">
            Pie de página
        </div>
    </footer>
</div>
</body>
</html>
